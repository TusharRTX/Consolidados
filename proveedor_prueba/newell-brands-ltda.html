<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Walmart Connect – Consolidados 2028</title>

<style>
:root {
  --primary: #0b2a6f;
  --bg: #d1d5db;
  --panel: #ffffff;
  --border: #e5e7eb;
  --text: #1f2937;
  --muted: #6b7280;
  --btn: #2563eb;
  --btn-disabled: #9ca3af;
  --locales-bg: #eef2ff;
}
* { box-sizing: border-box; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
body { margin: 0; background: var(--bg); color: var(--text); }
header { background: var(--primary); color: white; padding: 16px; text-align: center; font-weight: 600; }
.wrapper { max-width: 760px; margin: 24px auto; padding: 0 14px; }

.provider-bar {
  background: white; border-radius: 16px; padding: 14px 16px; margin-bottom: 20px;
  box-shadow: 0 8px 20px rgba(0,0,0,.15);
  display: flex; justify-content: space-between; gap: 10px;
}
.provider-name { font-weight: 700; }
.provider-date { font-size: 12px; color: var(--muted); }

.card {
  background: var(--panel); border-radius: 18px;
  box-shadow: 0 10px 26px rgba(0,0,0,.18);
  overflow: hidden; margin-bottom: 22px;
}
.grid-main { display: grid; grid-template-columns: 1fr 1fr; }
.cell { min-width: 0; padding: 14px 16px; border-bottom: 1px solid var(--border); font-size: 13px; }
.grid-main > .cell:nth-child(odd) { border-right: 1px solid var(--border); }
.grid-main > .cell:nth-last-child(-n + 2) { border-bottom: none; }
.label { font-size: 11px; color: var(--muted); margin-bottom: 4px; }
.value { font-weight: 600; }

.btn {
  display: inline-block; width: 100%; padding: 11px; text-align: center;
  background: var(--btn); color: white; border-radius: 12px; font-weight: 600; text-decoration: none; white-space: nowrap;
}
.btn:focus-visible { outline: 2px solid #93c5fd; outline-offset: 2px; }
.btn.disabled { background: var(--btn-disabled); cursor: not-allowed; }

.locales-row { border-top: 1px solid var(--border); padding: 16px; }
.locales-btn {
  width: 100%; padding: 12px; background: var(--locales-bg);
  color: var(--primary); border-radius: 12px; font-weight: 600; text-align: center; cursor: pointer;
}

.modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,.45); z-index: 1000; justify-content: center; align-items: flex-end; }
.modal-content { background: white; width: 100%; max-height: 85vh; border-radius: 18px 18px 0 0; display: flex; flex-direction: column; }
.modal-header { padding: 14px 16px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; font-weight: 600; }
.modal-body { padding: 14px 16px; overflow-y: auto; }
.modal-body input { width: 100%; padding: 10px; margin-bottom: 10px; border-radius: 10px; border: 1px solid var(--border); }
.locales-list { list-style: none; padding: 0; margin: 0; }
.locales-list li { padding: 8px 4px; border-bottom: 1px solid var(--border); font-size: 13px; }
.close { font-size: 22px; cursor: pointer; }

@media (min-width: 769px) {
  .modal { align-items: center; }
  .modal-content { width: 520px; border-radius: 16px; }
}
</style>
</head>

<body>

<header>Walmart Connect · Consolidados</header>

<div class="wrapper">

  <div class="provider-bar">
    <div class="provider-name" id="providerName">Proveedor</div>
    <div class="provider-date" id="providerVigencia">Vigencia</div>
  </div>

  <div id="cardsRoot"></div>

</div>

<div class="modal" id="modalLocales" aria-hidden="true">
  <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-header">
      <span id="modalTitle">Locales asociados</span>
      <span class="close" id="btnCloseModal" role="button" aria-label="Cerrar">×</span>
    </div>
    <div class="modal-body">
      <input type="text" id="inputBuscar" placeholder="Buscar local..." />
      <ul class="locales-list" id="listaLocales"></ul>
    </div>
  </div>
</div>

<script>
// ====== Datos inyectados por Colab (placeholders) ======
const __PROVIDER__       = {"proveedor": "Newell Brands LTDA", "vigencia": "Etapa 1 (08/01/26 → 10/02/26)"};
const medidasPorElemento = {"1-2 PALLETS": "No Adjunta", "ISLA": "MÁXIMO: 100 x 120 x 150 cm.", "1-4 PALLETS": "No Adjunta"};
const elementos          = [{"nombre": "1-2 PALLETS", "medidas": "No Adjunta", "piezas": 1, "categoria": "JUGUETES-ACCESORIOS", "vigencia": "Etapa 1 (08/01/26 → 10/02/26)", "fotomontaje": "https://walmartconnect.cl/wp-content/uploads/forminator/818_69591769e92703498e05efc8dbca5e38/uploads/IZ4pgPTvnLpw-1-2-PALLET-CONTIGO-WM.jpg", "keyvisual": "https://walmartconnect.cl/wp-content/uploads/forminator/818_69591769e92703498e05efc8dbca5e38/uploads/kjqrgAWOcLJM-1-2-PALLET-CONTIGO-WM.jpg", "localesCsv": "32, 58, 73, 83, 91"}, {"nombre": "ISLA", "medidas": "MÁXIMO: 100 x 120 x 150 cm.", "piezas": 1, "categoria": "JUGUETES-ACCESORIOS", "vigencia": "Etapa 1 (08/01/26 → 10/02/26)", "fotomontaje": "https://walmartconnect.cl/wp-content/uploads/forminator/818_69591769e92703498e05efc8dbca5e38/uploads/ZYfwRVk3rCaW-thumbnail_KV-1-2-SISTEMA.jpg", "keyvisual": "https://walmartconnect.cl/wp-content/uploads/forminator/818_69591769e92703498e05efc8dbca5e38/uploads/nwK2SlN1eC9O-thumbnail_KV-1-2-SISTEMA.jpg", "localesCsv": "3, 32, 35, 37, 41, 44, 46, 49, 54, 57, 58, 62, 66, 71, 72, 73, 77, 80, 81, 83, 84, 87, 89, 91, 92, 95, 98, 99, 121, 137, 606, 626, 631, 632, 671, 682, 693, 747, 748, 929, 978, 983, 985"}, {"nombre": "1-4 PALLETS", "medidas": "No Adjunta", "piezas": 1, "categoria": "APARATOS DE CUIDADO PERSONAL", "vigencia": "Etapa 1 (08/01/26 → 10/02/26)", "fotomontaje": "https://walmartconnect.cl/wp-content/uploads/forminator/818_69591769e92703498e05efc8dbca5e38/uploads/V36rR9fBowNY-4to-Pallet-Newell-Oster-Generico.jpg", "keyvisual": "https://walmartconnect.cl/wp-content/uploads/forminator/818_69591769e92703498e05efc8dbca5e38/uploads/oQweW3rrdvHV-4to-Pallet-Newell-Oster-Generico.jpg", "localesCsv": "32, 33, 35, 41, 42, 44, 45, 46, 48, 49, 55, 57, 58, 62, 71, 72, 73, 75, 76, 78, 83, 84, 85, 89, 91, 92, 94, 95, 96, 97, 98, 99, 120, 121, 126, 456, 457, 608, 618, 620, 631, 670, 671, 679, 682, 697, 747"}, {"nombre": "1-4 PALLETS", "medidas": "No Adjunta", "piezas": 1, "categoria": "BEBIDAS - HIDRATACI?N - ENERG?A", "vigencia": "Etapa 1 (08/01/26 → 10/02/26)", "fotomontaje": "https://walmartconnect.cl/wp-content/uploads/forminator/818_69591769e92703498e05efc8dbca5e38/uploads/h0LIahq6G6cV-1-4-PALLET-CONTIGO-WM.jpg", "keyvisual": "https://walmartconnect.cl/wp-content/uploads/forminator/818_69591769e92703498e05efc8dbca5e38/uploads/zsvBbMBGTt0v-KV-1.jpg", "localesCsv": "3, 32, 33, 35, 41, 42, 44, 45, 46, 48, 54, 55, 58, 62, 71, 72, 73, 75, 76, 78, 81, 83, 84, 88, 89, 91, 92, 94, 95, 96, 97, 98, 99, 120, 121, 122, 143, 182, 426, 457, 459, 602, 607, 608, 618, 620, 626, 628, 635, 654, 655, 679, 682, 684, 686, 697, 739, 747, 945, 993"}, {"nombre": "1-4 PALLETS", "medidas": "No Adjunta", "piezas": 1, "categoria": "FRUTAS CONGELADAS", "vigencia": "Etapa 1 (08/01/26 → 10/02/26)", "fotomontaje": "https://walmartconnect.cl/wp-content/uploads/forminator/818_69591769e92703498e05efc8dbca5e38/uploads/hDki1wVdyBdT-Exhibidor-Go-Max-WMT-QR.jpg", "keyvisual": "https://walmartconnect.cl/wp-content/uploads/forminator/818_69591769e92703498e05efc8dbca5e38/uploads/owxFfywVixRU-Exhibidor-Go-Max-WMT-QR.jpg", "localesCsv": "58, Viña, del, Mar, 57, Buenaventura, 91, Antofagasta, 89, Bio, Bio, 747, Concon"}, {"nombre": "1-2 PALLETS", "medidas": "No Adjunta", "piezas": 1, "categoria": "JUGUETES-ACCESORIOS", "vigencia": "Etapa 1 (08/01/26 → 10/02/26)", "fotomontaje": "https://walmartconnect.cl/wp-content/uploads/forminator/818_69591769e92703498e05efc8dbca5e38/uploads/BqS6JiYU2AgP-PDQ-Medio-Tren.jpg", "keyvisual": "https://walmartconnect.cl/wp-content/uploads/forminator/818_69591769e92703498e05efc8dbca5e38/uploads/cFsTBnmBxm6i-KV.jpeg", "localesCsv": "35, RANCAGUA, 37, MATUCANA, 38, EINSTEIN, 41, HUECHURABA, (MALL, PLAZA, NO, 42, CURICO, 46, MAIPU, (AV, CENTRAL), 49, QUILICURA, 54, VICUNA, MACKENNA, 55, MACUL, 79, TALCA, 81, ARICA, 82, SAN, BERNARDO, 86, RECOLETA, 87, SANTA, ROSA, (SAN, RAMON), 88, LOS, DOMINICOS, 127, LINARES, 279, CURICO, CAMILO, HENRIQUEZ, 457, VILLA, ALEMANA, (CAMINO, TRO, 602, LOS, ANDES, VECINO, 606, CORONEL, 607, MELIPILLA, 608, CHILLAN, 616, MAIPU, 3, PONIENTE, 626, PRINCIPE, DE, GALES, 628, SANTA, CRUZ, 679, IQUIQUE, (BILBAO), 747, CONCON, (MAGALLANES), 945, CHIGUAYANTE, (MANUEL, RODRI, 978, LIMACHE, (ARTURO, PRAT), 983, LA, CALERA, 57, VITACURA, 71, NUNOA, VESPUCIO, SUR, 77, INDEPENDENCIA, 120, TEMUCO, (BARRIO, INGLES), 682, SAN, JOAQUIN, 684, 4, ESQUINAS, 693, LA, PINTANA, 3, IRARRAZAVAL, 32, GRAN, AVENIDA, 33, CALAMA, 36, LOS, ANGELES, 39, RECREO, 44, QUILIN, 45, MAIPU, (EL, DESCANSO), 48, PUENTE, ALTO, (MALL, PLAZA, T, 53, COQUIMBO, 58, VINA, DEL, MAR, 62, LA, FLORIDA, (PZA.VESPUCIO), 66, TALAGANTE, 72, ALAMEDA, 73, PUENTE, ALTO, (ESPACIO, URBA, 75, MAIPU, (PAJARITOS), 76, DEPARTAMENTAL, 78, IQUIQUE, 80, LOS, MORROS, 83, LA, FLORIDA, (SANTA, AMALIA), 84, EL, BELLOTO, 85, CERRILLOS, (OESTE), 89, BIO, BIO, 91, ANTOFAGASTA, 92, LA, SERENA, (PUERTAS, DEL, MA, 93, OSORNO, 94, VALDIVIA, 95, LA, REINA, 96, TEMUCO, (PRIETO), 97, PUENTE, NUEVO, 98, CONCEPCION, (PRATT), 99, PUERTO, MONTT, 121, PUNTA, ARENAS, 122, QUILLOTA, 125, OVALLE, 126, COPIAPO, 137, SAN, PABLO, 143, TALCA, LA, FLORIDA, 182, BUIN, (BERNARDO, O, HIGGINS), 244, OUTLET, PARK, 425, COPIAPO, 426, LOS, ANGELES, (SOR, VICENTA), 456, TEMUCO, BARROS, ARANA, 459, HIPER, CALAMA, HUAYTIQUINA, 518, VALPARAISO, (AV., ARGENTINA, 618, CASONA, OSORNO, 620, SAN, BERNARDO, (MALL, PLAZA, 631, COLLAO, 632, VINA, CENTRO, TERMINAL, 635, ARICA, (PEDRO, MONTT), 654, SAN, ANTONIO, 655, ANTOFAGASTA, 670, PUERTO, MONTT, (CARDONAL), 671, QUILICURA, (LO, MARCOLETA), 686, REG., ARICA, 697, SAN, FERNANDO, 736, PENAFLOR, (BALMACEDA), 739, MAIPU, (CAMINO, A, MELIPILLA, 748, RENCA, (MIRAFLORES), 798, HI, SANTIAGO, (SAN, BERNARDO, 929, PUERTO, MONTT, (LA, PALOMA), 952, TALCAHUANO, (PEREZ, GACITUA, 985, SAN, FELIPE, 988, CALAMA, (AV, GRECIA), 993, SAN, PEDRO, DE, LA, PAZ"}];
const localesPorElemento = {"1-2 PALLETS": ["32", "58", "73", "83", "91", "35", "RANCAGUA", "37", "MATUCANA", "38", "EINSTEIN", "41", "HUECHURABA", "(MALL", "PLAZA", "NO", "42", "CURICO", "46", "MAIPU", "(AV", "CENTRAL)", "49", "QUILICURA", "54", "VICUNA", "MACKENNA", "55", "MACUL", "79", "TALCA", "81", "ARICA", "82", "SAN", "BERNARDO", "86", "RECOLETA", "87", "SANTA", "ROSA", "(SAN", "RAMON)", "88", "LOS", "DOMINICOS", "127", "LINARES", "279", "CAMILO", "HENRIQUEZ", "457", "VILLA", "ALEMANA", "(CAMINO", "TRO", "602", "ANDES", "VECINO", "606", "CORONEL", "607", "MELIPILLA", "608", "CHILLAN", "616", "3", "PONIENTE", "626", "PRINCIPE", "DE", "GALES", "628", "CRUZ", "679", "IQUIQUE", "(BILBAO)", "747", "CONCON", "(MAGALLANES)", "945", "CHIGUAYANTE", "(MANUEL", "RODRI", "978", "LIMACHE", "(ARTURO", "PRAT)", "983", "LA", "CALERA", "57", "VITACURA", "71", "NUNOA", "VESPUCIO", "SUR", "77", "INDEPENDENCIA", "120", "TEMUCO", "(BARRIO", "INGLES)", "682", "JOAQUIN", "684", "4", "ESQUINAS", "693", "PINTANA", "IRARRAZAVAL", "GRAN", "AVENIDA", "33", "CALAMA", "36", "ANGELES", "39", "RECREO", "44", "QUILIN", "45", "(EL", "DESCANSO)", "48", "PUENTE", "ALTO", "T", "53", "COQUIMBO", "VINA", "DEL", "MAR", "62", "FLORIDA", "(PZA.VESPUCIO)", "66", "TALAGANTE", "72", "ALAMEDA", "(ESPACIO", "URBA", "75", "(PAJARITOS)", "76", "DEPARTAMENTAL", "78", "80", "MORROS", "(SANTA", "AMALIA)", "84", "EL", "BELLOTO", "85", "CERRILLOS", "(OESTE)", "89", "BIO", "ANTOFAGASTA", "92", "SERENA", "(PUERTAS", "MA", "93", "OSORNO", "94", "VALDIVIA", "95", "REINA", "96", "(PRIETO)", "97", "NUEVO", "98", "CONCEPCION", "(PRATT)", "99", "PUERTO", "MONTT", "121", "PUNTA", "ARENAS", "122", "QUILLOTA", "125", "OVALLE", "126", "COPIAPO", "137", "PABLO", "143", "182", "BUIN", "(BERNARDO", "O", "HIGGINS)", "244", "OUTLET", "PARK", "425", "426", "(SOR", "VICENTA)", "456", "BARROS", "ARANA", "459", "HIPER", "HUAYTIQUINA", "518", "VALPARAISO", "(AV.", "ARGENTINA", "618", "CASONA", "620", "631", "COLLAO", "632", "CENTRO", "TERMINAL", "635", "(PEDRO", "MONTT)", "654", "ANTONIO", "655", "670", "(CARDONAL)", "671", "(LO", "MARCOLETA)", "686", "REG.", "697", "FERNANDO", "736", "PENAFLOR", "(BALMACEDA)", "739", "A", "748", "RENCA", "(MIRAFLORES)", "798", "HI", "SANTIAGO", "929", "(LA", "PALOMA)", "952", "TALCAHUANO", "(PEREZ", "GACITUA", "985", "FELIPE", "988", "GRECIA)", "993", "PEDRO", "PAZ"], "ISLA": ["3", "32", "35", "37", "41", "44", "46", "49", "54", "57", "58", "62", "66", "71", "72", "73", "77", "80", "81", "83", "84", "87", "89", "91", "92", "95", "98", "99", "121", "137", "606", "626", "631", "632", "671", "682", "693", "747", "748", "929", "978", "983", "985"], "1-4 PALLETS": ["32", "33", "35", "41", "42", "44", "45", "46", "48", "49", "55", "57", "58", "62", "71", "72", "73", "75", "76", "78", "83", "84", "85", "89", "91", "92", "94", "95", "96", "97", "98", "99", "120", "121", "126", "456", "457", "608", "618", "620", "631", "670", "671", "679", "682", "697", "747", "3", "54", "81", "88", "122", "143", "182", "426", "459", "602", "607", "626", "628", "635", "654", "655", "684", "686", "739", "945", "993", "Viña", "del", "Mar", "Buenaventura", "Antofagasta", "Bio", "Concon"]};
// =======================================================

const cardsRoot   = document.getElementById('cardsRoot');
const modal       = document.getElementById('modalLocales');
const lista       = document.getElementById('listaLocales');
const inputBuscar = document.getElementById('inputBuscar');
const btnClose    = document.getElementById('btnCloseModal');

document.getElementById('providerName').textContent     = "Proveedor: " + (__PROVIDER__.proveedor || "Proveedor");
document.getElementById('providerVigencia').textContent = "Vigencia: " + (__PROVIDER__.vigencia || "Vigencia actual");

// === BOTÓN AZUL o BOTÓN GRIS (No Adjunta) ===
function linkBtn(url, label) {
  if (typeof url === "string") {
    const u = url.trim();
    const low = u.toLowerCase();
    if (low.startsWith("http://") || low.startsWith("https://")) {
      return `
        <a href="${u}"
           target="_blank"
           rel="noopener noreferrer"
           class="btn">
          ${label}
        </a>
      `;
    }
  }
  return `<span class="btn disabled">No Adjunta</span>`;
}

function openLocales(arr) {
  lista.innerHTML = '';
  (arr || []).forEach(l => {
    const li = document.createElement('li');
    li.textContent = 'Local ' + l;
    lista.appendChild(li);
  });
  inputBuscar.value = '';
  modal.style.display = 'flex';
  document.body.style.overflow = 'hidden';
  inputBuscar.focus();
}

function closeModal() {
  modal.style.display = 'none';
  document.body.style.overflow = '';
}

function filterLocales(v) {
  const val = (v || '').trim().toLowerCase();
  document.querySelectorAll('#listaLocales li').forEach(li => {
    li.style.display = li.textContent.toLowerCase().includes(val) ? '' : 'none';
  });
}

inputBuscar.addEventListener('keyup', e => filterLocales(e.target.value));
btnClose.addEventListener('click', closeModal);
modal.addEventListener('click', e => { if (e.target === modal) closeModal(); });
document.addEventListener('keydown', e => {
  if (e.key === 'Escape' && modal.style.display === 'flex') closeModal();
});

function renderCards() {
  cardsRoot.innerHTML = '';
  elementos.forEach(el => {
    const locales = localesPorElemento[el.nombre] || [];
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <div class="grid-main">
        <div class="cell">
          <div class="label">Elemento</div>
          <div class="value">${el.nombre || "No Adjunta"}</div>
        </div>
        <div class="cell">
          <div class="label">Medidas</div>
          <div class="value">${el.medidas || "No Adjunta"}</div>
        </div>
        <div class="cell">
          <div class="label">Cantidad de piezas</div>
          <div class="value">${(el.piezas ?? "—")} ${el.piezas ? "por local" : ""}</div>
        </div>
        <div class="cell">
          <div class="label">Zona a implementar</div>
          <div class="value">${el.categoria || "No Adjunta"}</div>
        </div>
        <div class="cell">${linkBtn(el.fotomontaje, "Fotomontaje")}</div>
        <div class="cell">${linkBtn(el.keyvisual, "Key Visual")}</div>
      </div>
      <div class="locales-row">
        <div class="locales-btn" role="button" aria-label="Ver locales">Ver locales (${locales.length})</div>
      </div>
    `;
    card.querySelector('.locales-btn').addEventListener('click', () => openLocales(locales));
    cardsRoot.appendChild(card);
  });
}

renderCards();
</script>

</body>
</html>
